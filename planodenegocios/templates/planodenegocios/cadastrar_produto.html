{% extends "base.html" %}
{% load static %}

{% block conteudo %}
<div class="container my-5">
  <div class="card shadow-lg border-0">
    <div class="card-body">
      <form id="form-produto-servico" method="POST" action="{% url 'cadastrar_produto' %}">
        {% csrf_token %}

        <div id="conteudo-produto-servico" class="tab-content active">
          <h2 class="card-title text-center mb-4">Produto ou Serviço</h2>
          <p class="text-muted text-center mb-4">Cadastre o produto ou serviço oferecido</p>

          <div class="mb-3">
            <label class="form-label">Tipo</label>
            <select class="form-select" name="tipo_de_produto" required>
              <option value="">Selecione...</option>
              <option value="servico">Serviço</option>
              <option value="terceiros">Produto de Terceiros (compra e revenda)</option>
              <option value="fabricacao">Fabricação própria (produto industrializado)</option>
            </select>
          </div>

          <div class="mb-3">
            <label class="form-label">Nome</label>
            <input type="text" class="form-control" placeholder="Nome do produto ou serviço" name="nome_produto">
          </div>

          <div class="mb-3">
            <label class="form-label">Unidade de Venda</label>
            <input type="text" class="form-control" placeholder="Unidade (ex: kg, unidade, litro...)" name="unidade_venda">
          </div>
          
          <div class="mb-3">
            <label class="form-label">Preço de Venda do Produto (R$)</label>
            <input type="number" step="0.01" class="form-control" placeholder="Ex: 50.00" name="precoVenda">
          </div>
          <div class="mb-3">
            <label class="form-label">Preço de Compra do Produto (R$)</label>
            <input type="number" step="0.01" class="form-control" placeholder="Ex: 30.00" name="precoCompra">
          </div>

          <div class="table-responsive rounded">
            <table class="table table-hover table-bordered align-middle text-center shadow-sm bg-white rounded" id="tabela-investimentos">
              <thead class="table-primary text-dark">
                <tr>
                  <th scope="col">Matéria-prima</th>
                  {% for produto in produtos %}
                    <th scope="col">{{ produto.nome }}</th>
                  {% endfor %}
                  <th scope="col">Custo por Unidade de Venda</th>
                </tr>
              </thead>
              <tbody>
                <!-- Linhas fixas -->
                <tr>
                  <th>Frete (R$)</th>
                  {% for produto in produtos %}
                    <td><input type="number" step="0.01" name="frete_{{ forloop.counter }}" class="form-control" value="{{ produto.frete|default_if_none:'' }}"></td>
                  {% endfor %}
                  <td><input type="number" step="0.01" id="input-novo-frete" name="novo_frete" class="form-control" placeholder="Frete (R$)"></td>
                </tr>
                <tr>
                  <th>Embalagem</th>
                  {% for produto in produtos %}
                    <td><input type="number" step="0.01" name="embalagem_{{ forloop.counter }}" class="form-control" value="{{ produto.embalagem|default_if_none:'' }}"></td>
                  {% endfor %}
                  <td><input type="number" step="0.01" id="input-nova-embalagem" name="nova_embalagem" class="form-control" placeholder="Embalagem"></td>
                </tr>
            <div class="text-center mt-4">
              <button type="submit" class="btn-salvar">Salvar</button>
            </div>

          </div>
      </form>
          <div class="footer-notes mt-4 p-3 border-top bg-light rounded">
          <strong>Orientação:</strong> 
          Indique e configure o mix de produtos e serviços oferecidos pelo empreendimento. 
          <ul>
          <li>Presta serviços ou vende produtos? Produtos feitos pela empresa ou recende produtos de terceiros? Vende, aluga ou licencia? Pagamento único ou recorrente?</li>
          <li>Os produtos são vendidos unitariamente ou em lotes/pacotes?</li>
          <li>Qual o preço? A política de preço prevê variação do preço ao longo do tempo?</li>
          <li>Quais os custos com fretes, embalagens e matéria-prima?</li>
          <li>Se o empreendimento compra e revende produtos/serviços, indique qual a Margem de Lucro Bruta praticada.</li>
          </ul> 
        </div>
    </div>
  </div>
</div>
{% endblock conteudo %}

{% block extra_js %}
  <script src="{% static 'js/sidebar.js' %}"></script>
  <script src="{% static 'js/botao-ativacao.js' %}"></script>
  <script src="{% static 'js/tabela-materiaprima.js' %}"></script>
{% endblock extra_js %}
